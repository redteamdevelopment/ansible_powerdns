# ============================================================================
# PowerDNS Recursor Cluster Inventory
# ============================================================================
# 
# 支持两种SSH登录方式:
#   1. 密码登录 (适用于DigitalOcean, Vultr等VPS)
#   2. 密钥登录 (适用于AWS EC2等云服务器)
#
# ============================================================================

[dns_servers]
# -----------------------------------------------------------------------------
# 方式1: 密码登录 (DigitalOcean, Vultr等)
# 格式: hostname ansible_host=IP地址 ansible_ssh_pass=密码
# -----------------------------------------------------------------------------
#recursor1 ansible_host=165.22.57.149 ansible_ssh_pass=asda12oid1APO11a

# -----------------------------------------------------------------------------
# 方式2: AWS密钥登录 (需要sudo提权)

hostname ansible_host=18.143.190.240 ansible_user=admin ansible_ssh_private_key_file=~/.ssh/dns2.pem ansible_become=yes

# AWS EC2默认不允许root直接登录，需要通过普通用户登录后sudo提权
# 相当于: ssh -i "dns2.pem" admin@IP 然后执行 sudo su root
#
# AWS EC2默认用户名:
#   - Debian/Ubuntu: admin 或 ubuntu
#   - Amazon Linux:  ec2-user
#   - CentOS/RHEL:   centos 或 ec2-user
#
# 示例:
# aws_dns1 ansible_host=18.143.190.240 ansible_user=admin ansible_ssh_private_key_file=~/.ssh/dns2.pem ansible_become=yes
# aws_dns2 ansible_host=13.250.xxx.xxx ansible_user=admin ansible_ssh_private_key_file=~/.ssh/dns2.pem ansible_become=yes
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# 混合配置示例 (同时管理不同云服务商的服务器):
# do_dns1  ansible_host=165.22.57.149 ansible_user=root ansible_ssh_pass=your_password
# aws_dns1 ansible_host=18.143.190.240 ansible_user=admin ansible_ssh_private_key_file=~/.ssh/dns2.pem ansible_become=yes
# -----------------------------------------------------------------------------


[dns_servers:vars]
# 默认SSH用户 (AWS服务器需在主机行单独指定用户名覆盖此设置)
ansible_user=root

# Python解释器路径
ansible_python_interpreter=/usr/bin/python3

# SSH连接选项
# -o StrictHostKeyChecking=no: 首次连接时自动接受主机密钥
# -o UserKnownHostsFile=/dev/null: 不保存主机密钥到known_hosts
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'


# ============================================================================
# AWS专用组 (可选 - 用于区分管理不同类型的服务器)
# ============================================================================
[aws_servers]
# aws_dns1 ansible_host=18.143.190.240
# aws_dns2 ansible_host=13.250.xxx.xxx

[aws_servers:vars]
# AWS EC2 登录用户 (非root)
ansible_user=admin
# SSH密钥文件路径
ansible_ssh_private_key_file=~/.ssh/dns2.pem
ansible_python_interpreter=/usr/bin/python3
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'

# ========== AWS sudo提权配置 (重要!) ==========
# AWS EC2 默认禁止root登录，需要通过sudo获取root权限
# 这相当于手动执行: sudo su root
ansible_become=yes
ansible_become_method=sudo
# 如果需要密码，取消下面的注释 (大多数AWS AMI不需要)
# ansible_become_pass=your_sudo_password


# ============================================================================
# 所有DNS服务器的父组 (包含两个子组)
# ============================================================================
[all_dns:children]
dns_servers
aws_servers